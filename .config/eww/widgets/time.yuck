;; Time Vars
(
  defvar timeState
  false
)

(
  defpoll timeDate
  :interval "5s"
  :initial "ERROR"
  `date +"%F, %T"`
)

;; Time Widget
(
  defwidget time [] (
    eventbox
    :cursor "pointer"
    :class "container"
    :onclick `eww update timeState=${!timeState}`
    :onrightclick `eww open --toggle calendar`
    (
      box
      :class "spacer"
      { 
        timeState ?
          substring(timeDate, 0, 10) : 
          substring(timeDate, 12, 5)
      }
    )
  )
)